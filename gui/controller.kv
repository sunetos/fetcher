#:kivy 1.4.2
#:import state_cols main.state_cols

Controller:
    downloads: downloads

    canvas:
        Color:
            rgba: (0, 0, 0)

    StackLayout:
        id: downloads
        orientation: 'lr-tb'
        padding: 0
        spacing: 5

[IconButton@Button]:
    font_size: 10
    size_hint_x: None
    width: 16
    border: 0, 0, 0, 0
    background_color: 0, 0, 0, 0.1
    font_name: 'fontawesome-webfont.ttf'

<DownloadRow>:
    id: download
    orientation: 'horizontal'
    size_hint_y: None
    height: 20

    name: '(file name here)'
    state: 'pending'
    status: 'waiting...'
    ratio: 0.0

    browse: btn_browse

    canvas:
        Color:
            hsv: state_cols[download.state or 'pending'].bg
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            hsv: state_cols[download.state or 'pending'].fg
        Rectangle:
            pos: self.pos
            size: self.size[0]*min(self.ratio, 1.0), self.size[1]

    Label:
        id: lbl_name
        font_size: 10
        text: download.name

    #IconButton:
    #    text: u'\uf07c'

    Button:
        id: btn_browse
        text: 'Browse'
        font_size: 8
        opacity: 0.5
        size_hint_x: None
        width: 45
        border: 0, 0, 0, 0
        background_color: 0.5, 0.5, 0.5, 0.5
